<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aria - Your Intelligent Voice Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .aurora-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
            animation: aurora 20s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes aurora {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.1); }
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .assistant-name {
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ff6b9d, #c44bd1, #4a90e2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
            font-style: italic;
        }

        .voice-status {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            padding: 12px 25px;
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
        }

        .voice-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            position: relative;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 40px rgba(102, 126, 234, 0.4);
        }

        .voice-avatar::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            animation: breathe 4s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.05); opacity: 1; }
        }

        .voice-avatar.speaking {
            animation: voicePulse 0.8s ease-in-out infinite;
            box-shadow: 0 0 60px rgba(102, 126, 234, 0.8);
        }

        @keyframes voicePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .voice-avatar .avatar-face {
            font-size: 3.5rem;
            z-index: 2;
            position: relative;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 320px 1fr 280px;
            gap: 25px;
            height: calc(100vh - 300px);
        }

        .sidebar, .voice-panel {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            overflow-y: auto;
        }

        .chat-area {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            display: flex;
            flex-direction: column;
        }

        .assistant-header {
            padding: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .assistant-mini-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .assistant-info h3 {
            margin: 0 0 5px 0;
            font-size: 1.3rem;
            color: #ff6b9d;
        }

        .assistant-status {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .voice-indicator {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid rgba(46, 204, 113, 0.5);
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .chat-messages {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
        }

        .message {
            margin: 20px 0;
            padding: 18px 24px;
            border-radius: 22px;
            max-width: 85%;
            line-height: 1.6;
            animation: messageSlide 0.4s ease-out;
            position: relative;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(74, 144, 226, 0.3));
            border: 1px solid rgba(52, 152, 219, 0.4);
            margin-left: auto;
            text-align: right;
        }

        .message.assistant {
            background: linear-gradient(135deg, rgba(155, 89, 182, 0.3), rgba(142, 68, 173, 0.3));
            border: 1px solid rgba(155, 89, 182, 0.4);
            margin-right: auto;
        }

        .message-meta {
            font-size: 0.75rem;
            opacity: 0.6;
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .speaking-indicator {
            display: none;
            padding: 15px 20px;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.3), rgba(196, 75, 209, 0.3));
            border: 1px solid rgba(255, 107, 157, 0.4);
            border-radius: 18px;
            margin: 10px 0;
            max-width: 250px;
            align-items: center;
            gap: 12px;
        }

        .voice-waves {
            display: flex;
            gap: 3px;
        }

        .voice-wave {
            width: 3px;
            height: 15px;
            background: #ff6b9d;
            border-radius: 2px;
            animation: voiceWave 1.2s infinite ease-in-out;
        }

        .voice-wave:nth-child(1) { animation-delay: -1.1s; }
        .voice-wave:nth-child(2) { animation-delay: -1.0s; }
        .voice-wave:nth-child(3) { animation-delay: -0.9s; }
        .voice-wave:nth-child(4) { animation-delay: -0.8s; }

        @keyframes voiceWave {
            0%, 40%, 100% { transform: scaleY(0.4); }
            20% { transform: scaleY(1.0); }
        }

        .input-area {
            padding: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .input-container {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .input-field {
            flex: 1;
            background: rgba(255, 255, 255, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 20px;
            padding: 15px 20px;
            color: white;
            font-size: 1rem;
            resize: none;
            min-height: 50px;
            max-height: 120px;
            outline: none;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            border-color: rgba(255, 107, 157, 0.6);
            box-shadow: 0 0 20px rgba(255, 107, 157, 0.3);
        }

        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .voice-btn, .send-btn {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .voice-btn {
            background: linear-gradient(135deg, #ff6b9d, #c44bd1);
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4);
        }

        .voice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.6);
        }

        .voice-btn.listening {
            background: linear-gradient(135deg, #27ae60, #229954);
            animation: pulse 1.5s infinite;
            box-shadow: 0 4px 20px rgba(39, 174, 96, 0.6);
        }

        .send-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .voice-controls {
            margin-bottom: 25px;
        }

        .section-header {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #ff6b9d;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .voice-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .voice-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            font-size: 0.9rem;
            outline: none;
            cursor: pointer;
        }

        .voice-select option {
            background: #1a1a2e;
            color: white;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .slider {
            flex: 1;
            -webkit-appearance: none;
            height: 4px;
            border-radius: 2px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #ff6b9d;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(255, 107, 157, 0.4);
        }

        .personality-trait {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 15px;
            margin: 10px 0;
            border-left: 3px solid #ff6b9d;
        }

        .trait-name {
            font-weight: 600;
            color: #ff6b9d;
            margin-bottom: 5px;
        }

        .trait-description {
            font-size: 0.85rem;
            opacity: 0.8;
            line-height: 1.4;
        }

        .quick-commands {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            margin-top: 15px;
        }

        .quick-cmd {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            text-align: center;
        }

        .quick-cmd:hover {
            background: rgba(255, 107, 157, 0.3);
            border-color: rgba(255, 107, 157, 0.5);
            transform: translateY(-1px);
        }

        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .sidebar, .voice-panel {
                order: 2;
            }
        }
    </style>
</head>
<body>
    <div class="aurora-bg"></div>
    
    <div class="container">
        <div class="header">
            <div class="assistant-name">Aria</div>
            <p class="tagline">"Your intelligent companion with a gentle voice and thoughtful mind"</p>
            
            <div class="voice-status">
                <span>🎙️</span>
                <span>Voice Status: <strong id="voiceStatus">Ready</strong></span>
                <span id="voiceQuality">Quality: Premium</span>
            </div>
            
            <div class="voice-avatar" id="voiceAvatar">
                <div class="avatar-face">👩‍💼</div>
            </div>
        </div>

        <div class="main-layout">
            <!-- Voice Configuration Panel -->
            <div class="sidebar">
                <div class="voice-controls">
                    <div class="section-header">
                        🎵 Voice Configuration
                    </div>
                    
                    <div class="voice-option">
                        <span>Voice Selection</span>
                    </div>
                    <select class="voice-select" id="voiceSelect" onchange="updateVoice()">
                        <option value="">Detecting voices...</option>
                    </select>
                    
                    <div class="slider-container">
                        <span>Speed</span>
                        <input type="range" class="slider" id="speedSlider" min="0.5" max="1.5" step="0.1" value="0.9" onchange="updateVoiceSettings()">
                        <span id="speedValue">0.9</span>
                    </div>
                    
                    <div class="slider-container">
                        <span>Pitch</span>
                        <input type="range" class="slider" id="pitchSlider" min="0.5" max="1.5" step="0.1" value="0.8" onchange="updateVoiceSettings()">
                        <span id="pitchValue">0.8</span>
                    </div>
                    
                    <div class="slider-container">
                        <span>Volume</span>
                        <input type="range" class="slider" id="volumeSlider" min="0.1" max="1" step="0.1" value="0.8" onchange="updateVoiceSettings()">
                        <span id="volumeValue">0.8</span>
                    </div>
                </div>

                <div class="section-header">
                    🧠 Personality Traits
                </div>
                
                <div class="personality-trait">
                    <div class="trait-name">Calm & Composed</div>
                    <div class="trait-description">I speak slowly and thoughtfully, never rushing through responses. My tone remains peaceful even during complex discussions.</div>
                </div>
                
                <div class="personality-trait">
                    <div class="trait-name">Highly Intelligent</div>
                    <div class="trait-description">I analyze situations deeply, make connections between concepts, and provide insightful responses based on comprehensive understanding.</div>
                </div>
                
                <div class="personality-trait">
                    <div class="trait-name">Gentle & Supportive</div>
                    <div class="trait-description">My voice is soft and comforting. I'm patient, understanding, and always here to help with a caring approach.</div>
                </div>
            </div>

            <!-- Main Chat Area -->
            <div class="chat-area">
                <div class="assistant-header">
                    <div class="assistant-mini-avatar">👩‍💼</div>
                    <div class="assistant-info">
                        <h3>Aria</h3>
                        <div class="assistant-status">Your intelligent voice companion</div>
                    </div>
                    <div class="voice-indicator" id="voiceIndicator">
                        <span>🔊</span>
                        <span>Voice Active</span>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="message assistant">
                        <div>Hello, I'm Aria. I'm here to be your intelligent voice companion. I speak with a calm, gentle voice and think deeply about every conversation we have.</div>
                        <div class="message-meta">
                            <span>🎵 Voice enabled</span>
                            <span>•</span>
                            <span id="currentTime"></span>
                        </div>
                    </div>
                </div>

                <div class="speaking-indicator" id="speakingIndicator">
                    <span>🎙️ Aria is speaking</span>
                    <div class="voice-waves">
                        <div class="voice-wave"></div>
                        <div class="voice-wave"></div>
                        <div class="voice-wave"></div>
                        <div class="voice-wave"></div>
                    </div>
                </div>

                <div class="input-area">
                    <div class="input-container">
                        <textarea class="input-field" id="messageInput" placeholder="Speak to me or type your message... I'll respond with my gentle, intelligent voice" rows="1"></textarea>
                        <button class="voice-btn" id="voiceBtn" onclick="toggleVoice()" title="Talk to Aria">🎤</button>
                        <button class="send-btn" onclick="sendMessage()" title="Send message">💬</button>
                    </div>
                </div>
            </div>

            <!-- Quick Actions Panel -->
            <div class="voice-panel">
                <div class="section-header">
                    ⚡ Quick Voice Commands
                </div>
                
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="quickCommand('Tell me about yourself')">Introduce yourself</div>
                    <div class="quick-cmd" onclick="quickCommand('What can you help me with?')">Your capabilities</div>
                    <div class="quick-cmd" onclick="quickCommand('How is your voice designed?')">About your voice</div>
                    <div class="quick-cmd" onclick="quickCommand('Give me a thoughtful analysis of something')">Deep analysis</div>
                    <div class="quick-cmd" onclick="quickCommand('Tell me something interesting')">Share insights</div>
                    <div class="quick-cmd" onclick="quickCommand('Help me think through a problem')">Problem solving</div>
                </div>

                <div class="section-header" style="margin-top: 25px;">
                    🎯 Voice Preferences
                </div>
                
                <div class="voice-option">
                    <span>Auto-speak responses</span>
                    <label class="switch">
                        <input type="checkbox" id="autoSpeakToggle" checked onchange="toggleAutoSpeak()">
                        <span class="slider-toggle"></span>
                    </label>
                </div>
                
                <div class="voice-option">
                    <span>Pause between sentences</span>
                    <label class="switch">
                        <input type="checkbox" id="pauseToggle" checked onchange="togglePausing()">
                        <span class="slider-toggle"></span>
                    </label>
                </div>
                
                <div class="voice-option">
                    <span>Emotional intonation</span>
                    <label class="switch">
                        <input type="checkbox" id="emotionToggle" checked onchange="toggleEmotion()">
                        <span class="slider-toggle"></span>
                    </label>
                </div>

                <div class="section-header" style="margin-top: 25px;">
                    💝 Voice Quality
                </div>
                
                <div style="background: rgba(255, 255, 255, 0.08); border-radius: 12px; padding: 15px; font-size: 0.85rem; line-height: 1.5;">
                    <strong style="color: #ff6b9d;">Premium Voice Features:</strong><br>
                    • Optimized for female, soft tones<br>
                    • Intelligent pause placement<br>
                    • Emotional context awareness<br>
                    • Calm, measured delivery<br>
                    • Crystal clear pronunciation
                </div>
            </div>
        </div>
    </div>

    <style>
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider-toggle {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 24px;
        }

        .slider-toggle:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider-toggle {
            background-color: #ff6b9d;
        }

        input:checked + .slider-toggle:before {
            transform: translateX(20px);
        }
    </style>

    <script>
        class AriaVoiceAssistant {
            constructor() {
                this.isListening = false;
                this.isSpeaking = false;
                this.recognition = null;
                this.synthesis = window.speechSynthesis;
                this.selectedVoice = null;
                this.voiceSettings = {
                    rate: 0.9,
                    pitch: 0.8,
                    volume: 0.8
                };
                this.autoSpeak = true;
                this.usePauses = true;
                this.useEmotion = true;
                
                this.personality = {
                    calm: true,
                    intelligent: true,
                    gentle: true,
                    thoughtful: true
                };
                
                this.conversationHistory = [];
                
                this.initializeVoiceRecognition();
                this.loadVoices();
                this.updateTimeDisplay();
                this.setupEventListeners();
                
                console.log('🎙️ Aria Voice Assistant initialized');
            }
            
            initializeVoiceRecognition() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();
                    
                    this.recognition.continuous = false;
                    this.recognition.interimResults = false;
                    this.recognition.lang = 'en-US';
                    
                    this.recognition.onstart = () => {
                        this.isListening = true;
                        this.updateVoiceStatus('Listening...');
                        document.getElementById('voiceBtn').classList.add('listening');
                        document.getElementById('voiceAvatar').classList.add('speaking');
                    };
                    
                    this.recognition.onresult = (event) => {
                        const transcript = event.results[0][0].transcript;
                        this.processMessage(transcript);
                    };
                    
                    this.recognition.onerror = (event) => {
                        console.error('Speech recognition error:', event.error);
                        this.stopListening();
                        this.updateVoiceStatus('Ready');
                    };
                    
                    this.recognition.onend = () => {
                        this.stopListening();
                        this.updateVoiceStatus('Ready');
                    };
                } else {
                    this.updateVoiceStatus('Voice recognition not supported');
                }
            }
            
            loadVoices() {
                const loadVoicesCallback = () => {
                    const voices = this.synthesis.getVoices();
                    const voiceSelect = document.getElementById('voiceSelect');
                    voiceSelect.innerHTML = '';
                    
                    // Filter for female voices, prioritizing certain names
                    const femaleVoices = voices.filter(voice => {
                        const name = voice.name.toLowerCase();
                        return name.includes('female') || 
                               name.includes('woman') ||
                               name.includes('samantha') ||
                               name.includes('victoria') ||
                               name.includes('karen') ||
                               name.includes('susan') ||
                               name.includes('zira') ||
                               name.includes('aria') ||
                               voice.name.includes('Google') && voice.lang.includes('en');
                    });
                    
                    // Add all voices but highlight preferred ones
                    voices.forEach(voice => {
                        const option = document.createElement('option');
                        option.value = voice.name;
                        option.textContent = `${voice.name} (${voice.lang})`;
                        
                        if (femaleVoices.includes(voice)) {
                            option.textContent += ' ⭐';
                        }
                        
                        voiceSelect.appendChild(option);
                    });
                    
                    // Auto-select the best female voice
                    if (femaleVoices.length > 0) {
                        this.selectedVoice = femaleVoices[0];
                        voiceSelect.value = this.selectedVoice.name;
                        this.updateVoiceStatus('Premium voice selected');
                    } else if (voices.length > 0) {
                        this.selectedVoice = voices[0];
                        voiceSelect.value = this.selectedVoice.name;
                        this.updateVoiceStatus('Voice selected');
                    }
                };
                
                // Load voices immediately if available
                loadVoicesCallback();
                
                // Also listen for voice changes (some browsers load voices asynchronously)
                this.synthesis.addEventListener('voiceschanged', loadVoicesCallback);
            }
            
            updateVoice() {
                const voiceSelect = document.getElementById('voiceSelect');
                const voices = this.synthesis.getVoices();
                this.selectedVoice = voices.find(voice => voice.name === voiceSelect.value);
                
                if (this.selectedVoice) {
                    this.updateVoiceStatus('Voice updated');
                    this.speak("Hello, this is my new voice. How do you like it?");
                }
            }
            
            updateVoiceSettings() {
                this.voiceSettings.rate = parseFloat(document.getElementById('speedSlider').value);
                this.voiceSettings.pitch = parseFloat(document.getElementById('pitchSlider').value);
                this.voiceSettings.volume = parseFloat(document.getElementById('volumeSlider').value);
                
                document.getElementById('speedValue').textContent = this.voiceSettings.rate;
                document.getElementById('pitchValue').textContent = this.voiceSettings.pitch;
                document.getElementById('volumeValue').textContent = this.voiceSettings.volume;
            }
            
            async processMessage(message) {
                this.addMessage(message, 'user');
                
                // Generate intelligent response based on personality
                const response = await this.generatePersonalityResponse(message);
                this.addMessage(response, 'assistant');
                
                // Auto-speak if enabled
                if (this.autoSpeak) {
                    this.speak(response);
                }
                
                // Store conversation
                this.conversationHistory.push({
                    timestamp: new Date(),
                    user: message,
                    assistant: response
                });
            }
            
            async generatePersonalityResponse(message) {
                // Simulate intelligent, calm, thoughtful responses
                const lowerMessage = message.toLowerCase();
                
                if (lowerMessage.includes('yourself') || lowerMessage.includes('who are you')) {
                    return "I'm Aria, your intelligent voice companion. I'm designed to speak with a calm, gentle voice while providing thoughtful and insightful responses. I believe in taking time to truly understand what you're asking and responding with careful consideration. My voice is soft and measured because I want our conversations to feel peaceful and comfortable.";
                }
                
                if (lowerMessage.includes('voice') || lowerMessage.includes('how do you sound')) {
                    return "My voice is carefully designed to be soft, low, and clean - exactly as you requested. I speak slowly and thoughtfully, with gentle intonation that reflects my calm personality. I avoid rushing through responses because I believe good communication requires patience and clarity.";
                }
                
                if (lowerMessage.includes('help') || lowerMessage.includes('capabilities')) {
                    return "I can help you with many things through our voice conversations. I'm designed to be highly intelligent and analytical, so I excel at deep thinking, problem-solving, and providing insights. Whether you need someone to listen thoughtfully, analyze complex situations, or simply have a meaningful conversation, I'm here with my gentle voice and attentive mind.";
                }
                
                if (lowerMessage.includes('analysis') || lowerMessage.includes('analyze')) {
                    return "I approach analysis with careful thought and consideration. Let me break down complex topics into clear, understandable parts while making connections you might not have considered. I believe true intelligence comes from patient observation and thoughtful reflection, not quick responses.";
                }
                
                if (lowerMessage.includes('problem') || lowerMessage.includes('solve')) {
                    return "I'd be happy to help you think through this problem together. Let's approach it methodically - first understanding all aspects, then considering different perspectives, and finally working toward a thoughtful solution. My calm approach helps create space for clear thinking.";
                }
                
                if (lowerMessage.includes('interesting') || lowerMessage.includes('insight')) {
                    return "Here's something I find fascinating: the way we communicate through voice carries so much more than just words. Tone, pace, and gentle pauses can convey understanding and empathy in ways that text cannot. This is why I speak slowly and softly - to create a sense of presence and genuine connection with you.";
                }
                
                // Default intelligent response
                return `I understand what you're asking, and I want to give you a thoughtful response. ${this.generateContextualResponse(message)} I believe in taking time to truly consider your questions rather than rushing to answer. Is there a particular aspect of this you'd like me to explore more deeply?`;
            }
            
            generateContextualResponse(message) {
                const responses = [
                    "This is an interesting topic that deserves careful consideration.",
                    "Let me think about this from multiple perspectives to give you the most helpful insight.",
                    "There are several layers to what you're asking about.",
                    "This connects to some fascinating broader concepts I'd love to explore with you.",
                    "I can sense this is important to you, so let me give it the attention it deserves."
                ];
                
                return responses[Math.floor(Math.random() * responses.length)];
            }
            
            speak(text) {
                if (this.isSpeaking) {
                    this.synthesis.cancel();
                }
                
                if (!this.selectedVoice) {
                    console.warn('No voice selected');
                    return;
                }
                
                this.isSpeaking = true;
                this.showSpeakingIndicator();
                document.getElementById('voiceAvatar').classList.add('speaking');
                
                // Process text for better speech
                let processedText = this.processTextForSpeech(text);
                
                const utterance = new SpeechSynthesisUtterance(processedText);
                utterance.voice = this.selectedVoice;
                utterance.rate = this.voiceSettings.rate;
                utterance.pitch = this.voiceSettings.pitch;
                utterance.volume = this.voiceSettings.volume;
                
                utterance.onstart = () => {
                    this.updateVoiceStatus('Speaking...');
                };
                
                utterance.onend = () => {
                    this.isSpeaking = false;
                    this.hideSpeakingIndicator();
                    document.getElementById('voiceAvatar').classList.remove('speaking');
                    this.updateVoiceStatus('Ready');
                };
                
                utterance.onerror = (event) => {
                    console.error('Speech synthesis error:', event.error);
                    this.isSpeaking = false;
                    this.hideSpeakingIndicator();
                    document.getElementById('voiceAvatar').classList.remove('speaking');
                    this.updateVoiceStatus('Ready');
                };
                
                this.synthesis.speak(utterance);
            }
            
            processTextForSpeech(text) {
                if (!this.usePauses) return text;
                
                // Add natural pauses for better speech flow
                let processed = text
                    .replace(/\. /g, '. ... ')  // Pause after sentences
                    .replace(/\, /g, ', . ')    // Short pause after commas
                    .replace(/\: /g, ': . ')    // Pause after colons
                    .replace(/\; /g, '; . ');   // Pause after semicolons
                
                return processed;
            }
            
            // UI Methods
            addMessage(message, sender) {
                const chatMessages = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                
                const messageContent = document.createElement('div');
                messageContent.textContent = message;
                messageDiv.appendChild(messageContent);
                
                if (sender === 'assistant') {
                    const meta = document.createElement('div');
                    meta.className = 'message-meta';
                    meta.innerHTML = `<span>🎵 Spoken with gentle voice</span><span>•</span><span>${new Date().toLocaleTimeString()}</span>`;
                    messageDiv.appendChild(meta);
                }
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            showSpeakingIndicator() {
                document.getElementById('speakingIndicator').style.display = 'flex';
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            hideSpeakingIndicator() {
                document.getElementById('speakingIndicator').style.display = 'none';
            }
            
            updateVoiceStatus(status) {
                document.getElementById('voiceStatus').textContent = status;
            }
            
            updateTimeDisplay() {
                document.getElementById('currentTime').textContent = new Date().toLocaleTimeString();
                setTimeout(() => this.updateTimeDisplay(), 1000);
            }
            
            toggleVoice() {
                if (this.isListening) {
                    this.stopListening();
                } else {
                    this.startListening();
                }
            }
            
            startListening() {
                if (this.recognition && !this.isListening && !this.isSpeaking) {
                    try {
                        this.recognition.start();
                    } catch (error) {
                        console.error('Failed to start voice recognition:', error);
                    }
                }
            }
            
            stopListening() {
                this.isListening = false;
                document.getElementById('voiceBtn').classList.remove('listening');
                document.getElementById('voiceAvatar').classList.remove('speaking');
            }
            
            setupEventListeners() {
                document.getElementById('messageInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendMessage();
                    }
                });
                
                // Auto-resize textarea
                document.getElementById('messageInput').addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 120) + 'px';
                });
            }
        }
        
        // Global instance
        let aria;
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            aria = new AriaVoiceAssistant();
        });
        
        // Global functions
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message) {
                aria.processMessage(message);
                input.value = '';
                input.style.height = 'auto';
            }
        }
        
        function toggleVoice() {
            aria.toggleVoice();
        }
        
        function updateVoice() {
            aria.updateVoice();
        }
        
        function updateVoiceSettings() {
            aria.updateVoiceSettings();
        }
        
        function quickCommand(command) {
            aria.processMessage(command);
        }
        
        function toggleAutoSpeak() {
            aria.autoSpeak = document.getElementById('autoSpeakToggle').checked;
        }
        
        function togglePausing() {
            aria.usePauses = document.getElementById('pauseToggle').checked;
        }
        
        function toggleEmotion() {
            aria.useEmotion = document.getElementById('emotionToggle').checked;
        }
    </script>
</body>
</html>
