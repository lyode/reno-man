<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-AI Assistant System - Enhanced</title>
    <style>
        /* Add these styles to your existing CSS */
        
        /* Enhanced AI Assistant Styles */
        .ai-assistant-panel {
            position: fixed;
            bottom: 140px;
            right: 20px;
            z-index: 250;
            transition: all 0.3s ease;
        }

        .ai-selector-panel {
            position: absolute;
            bottom: 100px;
            right: 0;
            background: var(--bg-card);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 12px 40px var(--shadow-strong);
            border: 1px solid var(--border-color);
            min-width: 300px;
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .ai-selector-panel.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .ai-assistant-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .ai-assistant-card:hover {
            background: var(--bg-card-hover);
            transform: translateY(-2px);
        }

        .ai-assistant-card.active {
            border-color: var(--accent-primary);
            background: rgba(56, 161, 105, 0.1);
        }

        .ai-avatar-mini {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            font-weight: 700;
        }

        .ai-info {
            flex: 1;
        }

        .ai-name {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 14px;
        }

        .ai-specialty {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .ai-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
        }

        /* Different avatar styles for each AI */
        .maya-avatar { background: linear-gradient(135deg, var(--accent-soft), #b794f6); }
        .luna-avatar { background: linear-gradient(135deg, #4c51bf, #667eea); }
        .aria-avatar { background: linear-gradient(135deg, #ed8936, #f6ad55); }
        .sage-avatar { background: linear-gradient(135deg, #38b2ac, #4fd1c7); }
        .nova-avatar { background: linear-gradient(135deg, #e53e3e, #fc8181); }

        /* Voice control indicators */
        .voice-control-panel {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 12px;
            margin-top: 12px;
            border: 1px solid var(--border-color);
        }

        .voice-settings {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 8px;
        }

        .voice-control {
            background: var(--bg-secondary);
            border: none;
            border-radius: 8px;
            padding: 8px 4px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-primary);
        }

        .voice-control:hover {
            background: var(--accent-primary);
            color: white;
        }

        .voice-control.active {
            background: var(--accent-primary);
            color: white;
        }

        /* Personality indicator */
        .personality-indicator {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            animation: personalityPulse 2s infinite;
        }

        @keyframes personalityPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* AI Mood Indicator */
        .ai-mood {
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid white;
            font-size: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Speech bubble variations */
        .maya-bubble { border-color: var(--accent-soft); }
        .luna-bubble { border-color: #4c51bf; }
        .aria-bubble { border-color: #ed8936; }
        .sage-bubble { border-color: #38b2ac; }
        .nova-bubble { border-color: #e53e3e; }

        /* Quick action buttons */
        .ai-quick-actions {
            display: flex;
            gap: 6px;
            margin-top: 8px;
        }

        .quick-action-btn {
            background: var(--accent-primary);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 4px 8px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quick-action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px var(--shadow-medium);
        }
    </style>
</head>
<body>

<!-- Replace the existing Maya AI Assistant section with this enhanced version -->
<div id="ai-assistant-panel" class="ai-assistant-panel">
    <!-- Main AI Avatar -->
    <div id="ai-avatar" class="maya-avatar" style="width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 8px 24px var(--shadow-medium); border: 3px solid white; position: relative;" onclick="toggleAI()">
        <span id="ai-avatar-icon" style="font-size: 32px;">ü§ñ</span>
        
        <!-- Personality Indicator -->
        <div id="personality-indicator" class="personality-indicator maya-avatar">
            <span>üíñ</span>
        </div>
        
        <!-- AI Mood Indicator -->
        <div id="ai-mood" class="ai-mood" style="background: var(--success);">
            <span>üòä</span>
        </div>
    </div>
    
    <!-- AI Selector Panel -->
    <div id="ai-selector-panel" class="ai-selector-panel">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <h4 style="margin: 0; color: var(--text-primary); font-weight: 700;">ü§ñ Choose Your AI Assistant</h4>
            <button onclick="closeAISelector()" style="background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 18px;">‚úï</button>
        </div>
        
        <!-- AI Assistant Options -->
        <div id="ai-assistants-list">
            <!-- Maya - Caring & Supportive -->
            <div class="ai-assistant-card active" onclick="selectAI('maya')" data-ai="maya">
                <div class="ai-avatar-mini maya-avatar">
                    <span>üíñ</span>
                </div>
                <div class="ai-info">
                    <div class="ai-name">Maya</div>
                    <div class="ai-specialty">Caring & Supportive ‚Ä¢ Business Coach</div>
                </div>
                <div class="ai-status"></div>
            </div>
            
            <!-- Luna - Professional & Efficient -->
            <div class="ai-assistant-card" onclick="selectAI('luna')" data-ai="luna">
                <div class="ai-avatar-mini luna-avatar">
                    <span>üåô</span>
                </div>
                <div class="ai-info">
                    <div class="ai-name">Luna</div>
                    <div class="ai-specialty">Professional & Efficient ‚Ä¢ Executive Assistant</div>
                </div>
                <div class="ai-status"></div>
            </div>
            
            <!-- Aria - Friendly & Energetic -->
            <div class="ai-assistant-card" onclick="selectAI('aria')" data-ai="aria">
                <div class="ai-avatar-mini aria-avatar">
                    <span>üéµ</span>
                </div>
                <div class="ai-info">
                    <div class="ai-name">Aria</div>
                    <div class="ai-specialty">Friendly & Energetic ‚Ä¢ Creative Partner</div>
                </div>
                <div class="ai-status"></div>
            </div>
            
            <!-- Sage - Wise & Analytical -->
            <div class="ai-assistant-card" onclick="selectAI('sage')" data-ai="sage">
                <div class="ai-avatar-mini sage-avatar">
                    <span>üß†</span>
                </div>
                <div class="ai-info">
                    <div class="ai-name">Sage</div>
                    <div class="ai-specialty">Wise & Analytical ‚Ä¢ Strategy Advisor</div>
                </div>
                <div class="ai-status"></div>
            </div>
            
            <!-- Nova - Innovative & Tech-Savvy -->
            <div class="ai-assistant-card" onclick="selectAI('nova')" data-ai="nova">
                <div class="ai-avatar-mini nova-avatar">
                    <span>‚≠ê</span>
                </div>
                <div class="ai-info">
                    <div class="ai-name">Nova</div>
                    <div class="ai-specialty">Innovative & Tech-Savvy ‚Ä¢ Digital Expert</div>
                </div>
                <div class="ai-status"></div>
            </div>
        </div>
        
        <!-- Voice Controls -->
        <div class="voice-control-panel">
            <div style="font-size: 12px; font-weight: 600; color: var(--text-primary); margin-bottom: 4px;">üéµ Voice Settings</div>
            <div class="voice-settings">
                <button class="voice-control" onclick="setVoiceSpeed('slow')">Slow</button>
                <button class="voice-control active" onclick="setVoiceSpeed('normal')">Normal</button>
                <button class="voice-control" onclick="setVoiceSpeed('fast')">Fast</button>
                <button class="voice-control" onclick="setVoicePitch('low')">Low</button>
                <button class="voice-control active" onclick="setVoicePitch('normal')">Medium</button>
                <button class="voice-control" onclick="setVoicePitch('high')">High</button>
                <button class="voice-control" onclick="setVoiceVolume('quiet')">Quiet</button>
                <button class="voice-control active" onclick="setVoiceVolume('normal')">Normal</button>
                <button class="voice-control" onclick="setVoiceVolume('loud')">Loud</button>
            </div>
        </div>
        
        <!-- Quick Actions -->
        <div class="ai-quick-actions">
            <button class="quick-action-btn" onclick="testCurrentAI()">Test Voice</button>
            <button class="quick-action-btn" onclick="aiIntroduction()">Introduction</button>
            <button class="quick-action-btn" onclick="resetAISettings()">Reset</button>
        </div>
    </div>
    
    <!-- Speech Bubble -->
    <div id="ai-speech-bubble" class="maya-speech-bubble" style="position: absolute; bottom: 90px; right: 0; background: var(--bg-card); border-radius: 20px 20px 4px 20px; padding: 16px 20px; max-width: 280px; box-shadow: 0 8px 24px var(--shadow-medium); border: 2px solid var(--accent-soft); display: none; animation: slideInRight 0.3s ease;">
        <div id="ai-message" style="color: var(--text-primary); font-size: 14px; line-height: 1.4;">
            Hi! I'm Maya, your caring AI assistant. How can I help you today?
        </div>
        <div style="position: absolute; bottom: -8px; right: 20px; width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 8px solid var(--accent-soft);"></div>
    </div>
    
    <!-- AI Controls -->
    <div style="position: absolute; bottom: -40px; right: 0; display: flex; gap: 8px;">
        <button id="ai-voice-btn" class="maya-btn" onclick="toggleVoiceCommand()" title="Voice Command" style="width: 36px; height: 36px; border-radius: 18px; border: none; background: var(--accent-primary); color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; font-size: 14px;">
            üé§
        </button>
        <button class="maya-btn" onclick="showAISelector()" title="Switch AI" style="width: 36px; height: 36px; border-radius: 18px; border: none; background: var(--accent-warm); color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; font-size: 14px;">
            üîÑ
        </button>
        <button class="maya-btn" onclick="showAISettings()" title="Settings" style="width: 36px; height: 36px; border-radius: 18px; border: none; background: var(--accent-soft); color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; font-size: 14px;">
            ‚öôÔ∏è
        </button>
    </div>
</div>

<script>
// Enhanced Multi-AI Assistant System
var currentAI = 'maya';
var aiActive = false;
var voiceSettings = {
    speed: 'normal',
    pitch: 'normal',
    volume: 'normal'
};

// AI Assistant Personalities
var aiAssistants = {
    maya: {
        name: 'Maya',
        icon: 'üíñ',
        emoji: 'ü§ñ',
        mood: 'üòä',
        personality: 'caring',
        avatar: 'maya-avatar',
        bubble: 'maya-bubble',
        specialty: 'Caring & Supportive Business Coach',
        description: 'Maya is your warm, caring business companion who provides emotional support and encouragement.',
        voiceProfile: {
            rate: 0.9,
            pitch: 1.1,
            volume: 0.8,
            preferredVoice: 'female'
        },
        greetings: [
            "Hello there! I'm Maya, your caring AI assistant. I'm here to support you and help your business thrive!",
            "Hi! Maya here, ready to help you with love and care. What can I do for you today?",
            "Welcome back! I've missed you. How can I support your business journey today?",
            "Hello! I'm Maya, and I genuinely care about your success. Let's work together!"
        ],
        responseStyle: {
            supportive: "I believe in you! ",
            encouraging: "You're doing amazing! ",
            caring: "I'm here for you. ",
            warm: "Let me help you with that. "
        }
    },
    
    luna: {
        name: 'Luna',
        icon: 'üåô',
        emoji: 'üë©‚Äçüíº',
        mood: 'üòé',
        personality: 'professional',
        avatar: 'luna-avatar',
        bubble: 'luna-bubble',
        specialty: 'Professional & Efficient Executive Assistant',
        description: 'Luna is your polished, efficient executive assistant focused on productivity and results.',
        voiceProfile: {
            rate: 1.1,
            pitch: 0.9,
            volume: 0.9,
            preferredVoice: 'female'
        },
        greetings: [
            "Good day. I'm Luna, your executive AI assistant. Let's optimize your business operations.",
            "Hello. Luna here, ready to streamline your workflow and boost productivity.",
            "Greetings. I'm Luna, your professional assistant. How can I enhance your efficiency today?",
            "Good morning. Luna at your service. Let's make today highly productive."
        ],
        responseStyle: {
            professional: "Certainly. ",
            efficient: "I'll handle that immediately. ",
            direct: "Here's what we need to do: ",
            organized: "Let me organize this for you. "
        }
    },
    
    aria: {
        name: 'Aria',
        icon: 'üéµ',
        emoji: 'üé®',
        mood: 'üòÑ',
        personality: 'energetic',
        avatar: 'aria-avatar',
        bubble: 'aria-bubble',
        specialty: 'Friendly & Energetic Creative Partner',
        description: 'Aria is your enthusiastic, creative partner who brings energy and innovation to everything.',
        voiceProfile: {
            rate: 1.2,
            pitch: 1.3,
            volume: 0.9,
            preferredVoice: 'female'
        },
        greetings: [
            "Hey there! I'm Aria, your energetic AI buddy! Ready to create something awesome together?",
            "Hi! Aria here, bursting with energy and ideas! What exciting project can we tackle today?",
            "Hello! I'm Aria, and I'm SO excited to help you! Let's make magic happen!",
            "Hey! Aria at your service! Let's turn your business dreams into reality with style!"
        ],
        responseStyle: {
            energetic: "This is so exciting! ",
            creative: "Oh, I have a brilliant idea! ",
            enthusiastic: "Yes! Let's do this! ",
            innovative: "Here's a fresh approach: "
        }
    },
    
    sage: {
        name: 'Sage',
        icon: 'üß†',
        emoji: 'ü¶â',
        mood: 'ü§î',
        personality: 'analytical',
        avatar: 'sage-avatar',
        bubble: 'sage-bubble',
        specialty: 'Wise & Analytical Strategy Advisor',
        description: 'Sage is your wise, analytical advisor who provides deep insights and strategic guidance.',
        voiceProfile: {
            rate: 0.8,
            pitch: 0.8,
            volume: 0.8,
            preferredVoice: 'female'
        },
        greetings: [
            "Greetings. I am Sage, your analytical advisor. Let us examine your business challenges with wisdom.",
            "Hello. Sage here, ready to provide strategic insights and analytical guidance.",
            "Welcome. I'm Sage, your wise counsel. How may I assist in your strategic planning today?",
            "Good day. Sage at your service. Let's analyze your situation and develop optimal solutions."
        ],
        responseStyle: {
            analytical: "Let me analyze this thoroughly. ",
            wise: "In my experience, ",
            strategic: "From a strategic perspective, ",
            thoughtful: "After careful consideration, "
        }
    },
    
    nova: {
        name: 'Nova',
        icon: '‚≠ê',
        emoji: 'üöÄ',
        mood: 'ü§ñ',
        personality: 'innovative',
        avatar: 'nova-avatar',
        bubble: 'nova-bubble',
        specialty: 'Innovative & Tech-Savvy Digital Expert',
        description: 'Nova is your cutting-edge digital expert focused on innovation and technological advancement.',
        voiceProfile: {
            rate: 1.0,
            pitch: 1.0,
            volume: 0.9,
            preferredVoice: 'female'
        },
        greetings: [
            "Hello! I'm Nova, your tech-savvy AI. Ready to innovate and revolutionize your business?",
            "Hi there! Nova here, bringing cutting-edge solutions to your fingertips!",
            "Greetings! I'm Nova, your digital transformation specialist. Let's push boundaries!",
            "Hey! Nova reporting for duty. Time to supercharge your business with next-gen solutions!"
        ],
        responseStyle: {
            innovative: "Here's a cutting-edge approach: ",
            technical: "From a technical standpoint, ",
            futuristic: "Let's leverage the latest technology: ",
            digital: "The digital solution is: "
        }
    }
};

// Initialize AI System
function initializeAISystem() {
    currentAI = localStorage.getItem('selectedAI') || 'maya';
    aiActive = false;
    
    // Load voice settings
    var savedVoiceSettings = localStorage.getItem('voiceSettings');
    if (savedVoiceSettings) {
        voiceSettings = JSON.parse(savedVoiceSettings);
        applyVoiceSettings();
    }
    
    // Initialize speech synthesis
    initializeSpeechSynthesis();
    
    // Set initial AI
    updateAIDisplay();
    
    // Welcome message
    setTimeout(function() {
        aiSpeak(getRandomGreeting(currentAI));
    }, 2000);
    
    console.log('ü§ñ Multi-AI Assistant System Initialized');
    console.log('Available AIs: Maya, Luna, Aria, Sage, Nova');
}

// Speech Synthesis Initialization
function initializeSpeechSynthesis() {
    if ('speechSynthesis' in window) {
        speechSynthesis.onvoiceschanged = function() {
            updateAvailableVoices();
        };
        updateAvailableVoices();
    }
}

function updateAvailableVoices() {
    var voices = speechSynthesis.getVoices();
    
    // Assign preferred voices for each AI
    for (var aiKey in aiAssistants) {
        var ai = aiAssistants[aiKey];
        ai.voice = findBestVoice(voices, ai.voiceProfile.preferredVoice);
    }
}

function findBestVoice(voices, preference) {
    // Try to find the best female voice for each AI
    var femaleVoices = voices.filter(voice => 
        voice.lang.startsWith('en') && 
        (voice.name.toLowerCase().includes('female') || 
         voice.name.toLowerCase().includes('woman') ||
         voice.name.toLowerCase().includes('samantha') ||
         voice.name.toLowerCase().includes('karen') ||
         voice.name.toLowerCase().includes('victoria'))
    );
    
    if (femaleVoices.length > 0) {
        return femaleVoices[Math.floor(Math.random() * femaleVoices.length)];
    }
    
    // Fallback to any English voice
    var englishVoices = voices.filter(voice => voice.lang.startsWith('en'));
    return englishVoices.length > 0 ? englishVoices[0] : voices[0];
}

// AI Selection Functions
function showAISelector() {
    document.getElementById('ai-selector-panel').classList.add('show');
    updateAISelectorDisplay();
}

function closeAISelector() {
    document.getElementById('ai-selector-panel').classList.remove('show');
}

function selectAI(aiKey) {
    if (aiKey === currentAI) {
        closeAISelector();
        return;
    }
    
    var oldAI = currentAI;
    currentAI = aiKey;
    
    // Update display
    updateAIDisplay();
    updateAISelectorDisplay();
    
    // Save preference
    localStorage.setItem('selectedAI', currentAI);
    
    // Transition message
    var ai = aiAssistants[currentAI];
    var oldAIName = aiAssistants[oldAI].name;
    
    aiSpeak(`Hello! I'm ${ai.name}, taking over from ${oldAIName}. ${getRandomGreeting(currentAI).split('!')[1] || ai.description}`);
    
    closeAISelector();
    showMayaNotification(`üîÑ Switched to ${ai.name} - ${ai.specialty}`);
}

function updateAIDisplay() {
    var ai = aiAssistants[currentAI];
    
    // Update main avatar
    var avatar = document.getElementById('ai-avatar');
    var avatarIcon = document.getElementById('ai-avatar-icon');
    var personalityIndicator = document.getElementById('personality-indicator');
    var moodIndicator = document.getElementById('ai-mood');
    var speechBubble = document.getElementById('ai-speech-bubble');
    
    if (avatar) {
        avatar.className = ai.avatar;
    }
    
    if (avatarIcon) {
        avatarIcon.textContent = ai.emoji;
    }
    
    if (personalityIndicator) {
        personalityIndicator.className = `personality-indicator ${ai.avatar}`;
        personalityIndicator.querySelector('span').textContent = ai.icon;
    }
    
    if (moodIndicator) {
        moodIndicator.querySelector('span').textContent = ai.mood;
    }
    
    if (speechBubble) {
        speechBubble.className = `ai-speech-bubble ${ai.bubble}`;
    }
}

function updateAISelectorDisplay() {
    var cards = document.querySelectorAll('.ai-assistant-card');
    cards.forEach(function(card) {
        var aiKey = card.getAttribute('data-ai');
        if (aiKey === currentAI) {
            card.classList.add('active');
        } else {
            card.classList.remove('active');
        }
    });
}

// AI Communication Functions
function toggleAI() {
    aiActive = !aiActive;
    var avatar = document.getElementById('ai-avatar');
    var speechBubble = document.getElementById('ai-speech-bubble');
    
    if (aiActive) {
        var ai = aiAssistants[currentAI];
        aiSpeak(getRandomGreeting(currentAI));
        if (avatar) {
            avatar.style.transform = 'scale(1.1)';
        }
        if (speechBubble) {
            speechBubble.style.display = 'block';
        }
    } else {
        if (avatar) {
            avatar.style.transform = 'scale(1)';
        }
        if (speechBubble) {
            speechBubble.style.display = 'none';
        }
    }
}

function aiSpeak(text, priority = false) {
    var ai = aiAssistants[currentAI];
    
    // Show message in bubble
    var messageElement = document.getElementById('ai-message');
    var speechBubble = document.getElementById('ai-speech-bubble');
    
    if (messageElement) {
        messageElement.textContent = text;
    }
    if (speechBubble) {
        speechBubble.style.display = 'block';
        speechBubble.classList.add('show');
    }
    
    // Add personality prefix
    var personalizedText = addPersonalityToMessage(text, ai);
    
    // Speak with voice synthesis
    if (speechSynthesis && ai.voice) {
        var utterance = new SpeechSynthesisUtterance(personalizedText);
        utterance.voice = ai.voice;
        
        // Apply voice profile and settings
        utterance.rate = ai.voiceProfile.rate * getVoiceSpeedMultiplier();
        utterance.pitch = ai.voiceProfile.pitch * getVoicePitchMultiplier();
        utterance.volume = ai.voiceProfile.volume * getVolumeMultiplier();
        
        utterance.onend = function() {
            // Hide bubble after speaking
            setTimeout(function() {
                if (speechBubble && !aiActive) {
                    speechBubble.style.display = 'none';
                }
            }, 3000);
        };
        
        speechSynthesis.speak(utterance);
    }
}

function addPersonalityToMessage(text, ai) {
    var style = ai.responseStyle;
    var keys = Object.keys(style);
    var randomPrefix = style[keys[Math.floor(Math.random() * keys.length)]];
    
    // Add personality-based variations
    switch (ai.personality) {
        case 'caring':
            return randomPrefix + text + " I'm always here to support you! üíñ";
        case 'professional':
            return randomPrefix + text + " Is there anything else I can assist with?";
        case 'energetic':
            return randomPrefix + text + " Let's keep the momentum going! üéâ";
        case 'analytical':
            return randomPrefix + text + " I hope this analysis proves valuable.";
        case 'innovative':
            return randomPrefix + text + " Ready to innovate further? üöÄ";
        default:
            return text;
    }
}

function getRandomGreeting(aiKey) {
    var ai = aiAssistants[aiKey];
    var greetings = ai.greetings;
    return greetings[Math.floor(Math.random() * greetings.length)];
}

// Voice Settings Functions
function setVoiceSpeed(speed) {
    voiceSettings.speed = speed;
    updateVoiceControlUI();
    saveVoiceSettings();
}

function setVoicePitch(pitch) {
    voiceSettings.pitch = pitch;
    updateVoiceControlUI();
    saveVoiceSettings();
}

function setVoiceVolume(volume) {
    voiceSettings.volume = volume;
    updateVoiceControlUI();
    saveVoiceSettings();
}

function getVoiceSpeedMultiplier() {
    switch (voiceSettings.speed) {
        case 'slow': return 0.7;
        case 'fast': return 1.3;
        default: return 1.0;
    }
}

function getVoicePitchMultiplier() {
    switch (voiceSettings.pitch) {
        case 'low': return 0.8;
        case 'high': return 1.2;
        default: return 1.0;
    }
}

function getVolumeMultiplier() {
    switch (voiceSettings.volume) {
        case 'quiet': return 0.5;
        case 'loud': return 1.0;
        default: return 0.8;
    }
}

function updateVoiceControlUI() {
    // Update button states
    var buttons = document.querySelectorAll('.voice-control');
    buttons.forEach(function(btn) {
        btn.classList.remove('active');
    });
    
    // Mark active buttons
    document.querySelector(`.voice-control[onclick*="${voiceSettings.speed}"]`).classList.add('active');
    document.querySelector(`.voice-control[onclick*="${voiceSettings.pitch}"]`).classList.add('active');
    document.querySelector(`.voice-control[onclick*="${voiceSettings.volume}"]`).classList.add('active');
}

function applyVoiceSettings() {
    updateVoiceControlUI();
}

function saveVoiceSettings() {
    localStorage.setItem('voiceSettings', JSON.stringify(voiceSettings));
}

// Test and Control Functions
function testCurrentAI() {
    var ai = aiAssistants[currentAI];
    var testMessages = [
        `Testing ${ai.name}'s voice! This is how I sound with current settings.`,
        `Hello! I'm ${ai.name}, your ${ai.specialty.toLowerCase()}. This is my voice profile.`,
        `Voice test complete! I'm ${ai.name}, ready to assist you with my unique personality.`
    ];
    
    var message = testMessages[Math.floor(Math.random() * testMessages.length)];
    aiSpeak(message);
}

function aiIntroduction() {
    var ai = aiAssistants[currentAI];
    var intro = `I'm ${ai.name}, your ${ai.specialty}. ${ai.description} My voice is optimized for ${ai.personality} interactions, and I'm here to make your business journey exceptional!`;
    aiSpeak(intro);
}

function resetAISettings() {
    voiceSettings = {
        speed: 'normal',
        pitch: 'normal',
        volume: 'normal'
    };
    saveVoiceSettings();
    applyVoiceSettings();
    aiSpeak("Voice settings have been reset to default. How do I sound now?");
}

function showAISettings() {
    showAISelector();
    aiSpeak("Here are your AI assistant options. Choose the one that best fits your current needs!");
}

// Enhanced Command Processing with Personality
function processAICommand(command) {
    var ai = aiAssistants[currentAI];
    var response = "";
    
    // Add personality-specific command processing
    if (command.includes('create quote') || command.includes('new quote')) {
        switch (ai.personality) {
            case 'caring':
                response = "Of course, dear! I'd love to help you create a beautiful quote. Let's make something amazing together!";
                break;
            case 'professional':
                response = "Certainly. I'll open the quote creation interface for efficient data entry.";
                break;
            case 'energetic':
                response = "YES! Let's create an awesome quote! This is going to be so exciting!";
                break;
            case 'analytical':
                response = "Excellent choice. Creating well-structured quotes is crucial for business success. Let me assist you.";
                break;
            case 'innovative':
                response = "Let's revolutionize your quoting process! I'll open the advanced quote creator.";
                break;
        }
        setTimeout(() => openSimpleJobForm(), 1000);
        
    } else if (command.includes('switch') || command.includes('change ai')) {
        response = `Would you like to switch to a different AI assistant? I'm ${ai.name}, but my colleagues are also here to help!`;
        setTimeout(() => showAISelector(), 1000);
        
    } else if (command.includes('voice') || command.includes('sound')) {
        response = `You can adjust my voice settings! I'm currently speaking with ${voiceSettings.speed} speed, ${voiceSettings.pitch} pitch, and ${voiceSettings.volume} volume.`;
        setTimeout(() => showAISelector(), 1000);
        
    } else {
        // Default personality-based responses
        switch (ai.personality) {
            case 'caring':
                response = "I'm not sure I understood that perfectly, but I'm here to help however I can. Could you try explaining it differently? I care about getting this right for you!";
                break;
            case 'professional':
                response = "I apologize, but I need clarification on that request. Could you please rephrase your instruction?";
                break;
            case 'energetic':
                response = "Ooh, I'm not quite sure what you meant, but I'm excited to help! Can you tell me more about what you need?";
                break;
            case 'analytical':
                response = "I require additional information to process that request effectively. Please provide more specific parameters.";
                break;
            case 'innovative':
                response = "Interesting input! Let me recalibrate my understanding. Could you elaborate on your request?";
                break;
        }
    }
    
    aiSpeak(response);
}

// Integrate with existing voice command system
function toggleVoiceCommand() {
    if (!voiceRecognition) {
        aiSpeak('Voice recognition is not supported in your browser, but I\'m still here to help through our interface!');
        return;
    }
    
    if (isListening) {
        voiceRecognition.stop();
        return;
    }
    
    isListening = true;
    document.getElementById('ai-voice-btn').classList.add('listening');
    showVoiceIndicator('Listening for your command...');
    
    try {
        voiceRecognition.start();
        var ai = aiAssistants[currentAI];
        aiSpeak(`I'm listening! Please tell me what you need help with.`, true);
    } catch (error) {
        isListening = false;
        hideVoiceIndicator();
        aiSpeak('Sorry, I had trouble starting voice recognition. Please try again.');
    }
}

// Notification system
function showMayaNotification(message) {
    var ai = aiAssistants[currentAI];
    var notification = document.getElementById('maya-notification') || createNotificationElement();
    if (notification) {
        notification.textContent = `${ai.emoji} ${ai.name}: ${message}`;
        notification.style.opacity = '1';
        notification.style.pointerEvents = 'auto';
        
        setTimeout(function() {
            notification.style.opacity = '0';
            notification.style.pointerEvents = 'none';
        }, 4000);
    }
}

function createNotificationElement() {
    var notification = document.createElement('div');
    notification.id = 'maya-notification';
    notification.style.cssText = `
        position: fixed; top: 80px; left: 50%; transform: translateX(-50%);
        background: linear-gradient(135deg, var(--accent-soft), #b794f6);
        color: white; padding: 12px 24px; border-radius: 25px;
        font-weight: 600; box-shadow: 0 8px 32px var(--shadow-medium);
        z-index: 260; opacity: 0; transition: all 0.3s ease; pointer-events: none;
    `;
    document.body.appendChild(notification);
    return notification;
}

// Initialize the enhanced AI system
document.addEventListener('DOMContentLoaded', function() {
    // Replace the existing Maya initialization with the new system
    setTimeout(function() {
        initializeAISystem();
    }, 1000);
});

// Export for global access
window.aiAssistants = aiAssistants;
window.currentAI = currentAI;
window.selectAI = selectAI;
window.aiSpeak = aiSpeak;
window.processAICommand = processAICommand;

console.log('ü§ñ Multi-AI Lady Assistant System Loaded!');
console.log('Available AIs: Maya (Caring), Luna (Professional), Aria (Energetic), Sage (Analytical), Nova (Innovative)');
</script>

</body>
</html>
